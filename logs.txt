==100691== Memcheck, a memory error detector
==100691== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.
==100691== Using Valgrind-3.15.0 and LibVEX; rerun with -h for copyright info
==100691== Command: toki examples/calculator.toki
==100691== 
==100691== Invalid read of size 1
==100691==    at 0x483EF46: strlen (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==100691==    by 0x4A35D44: __vfprintf_internal (vfprintf-internal.c:1688)
==100691==    by 0x4AEB152: __fprintf_chk (fprintf_chk.c:33)
==100691==    by 0x10C475: fprintf (stdio2.h:100)
==100691==    by 0x10C475: fprint_value (eval.c:170)
==100691==    by 0x112187: builtin_print (eval.c:188)
==100691==    by 0x112224: builtin_println (eval.c:196)
==100691==    by 0x10D66D: eval_expr_call (eval.c:913)
==100691==    by 0x10D99F: eval_expr (eval.c:1824)
==100691==    by 0x10CDB3: eval (eval.c:2100)
==100691==    by 0x11246A: eval_stmt_if (eval.c:1879)
==100691==    by 0x112415: eval_stmt_if (eval.c:1881)
==100691==    by 0x112415: eval_stmt_if (eval.c:1881)
==100691==  Address 0x4bcd5a0 is 0 bytes inside a block of size 6 free'd
==100691==    at 0x483CA3F: free (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==100691==    by 0x112777: gc_mas (gc.c:110)
==100691==    by 0x10BD00: env_gc (eval.c:54)
==100691==    by 0x10CF5A: eval (eval.c:2103)
==100691==    by 0x10D5BB: eval_with_return (eval.c:901)
==100691==    by 0x10D74B: eval_expr_call (eval.c:932)
==100691==    by 0x10D99F: eval_expr (eval.c:1824)
==100691==    by 0x112132: builtin_print (eval.c:182)
==100691==    by 0x112224: builtin_println (eval.c:196)
==100691==    by 0x10D66D: eval_expr_call (eval.c:913)
==100691==    by 0x10D99F: eval_expr (eval.c:1824)
==100691==    by 0x10CDB3: eval (eval.c:2100)
==100691==  Block was alloc'd at
==100691==    at 0x483B7F3: malloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==100691==    by 0x114BAE: strcpy_to_heap (common.c:4)
==100691==    by 0x10E919: eval_expr_value (eval.c:1143)
==100691==    by 0x10E919: eval_expr (eval.c:1832)
==100691==    by 0x112132: builtin_print (eval.c:182)
==100691==    by 0x112224: builtin_println (eval.c:196)
==100691==    by 0x10D66D: eval_expr_call (eval.c:913)
==100691==    by 0x10D99F: eval_expr (eval.c:1824)
==100691==    by 0x10CDB3: eval (eval.c:2100)
==100691==    by 0x11246A: eval_stmt_if (eval.c:1879)
==100691==    by 0x112415: eval_stmt_if (eval.c:1881)
==100691==    by 0x112415: eval_stmt_if (eval.c:1881)
==100691==    by 0x10CF5A: eval (eval.c:2103)
==100691== 
==100691== Invalid read of size 1
==100691==    at 0x483EF54: strlen (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==100691==    by 0x4A35D44: __vfprintf_internal (vfprintf-internal.c:1688)
==100691==    by 0x4AEB152: __fprintf_chk (fprintf_chk.c:33)
==100691==    by 0x10C475: fprintf (stdio2.h:100)
==100691==    by 0x10C475: fprint_value (eval.c:170)
==100691==    by 0x112187: builtin_print (eval.c:188)
==100691==    by 0x112224: builtin_println (eval.c:196)
==100691==    by 0x10D66D: eval_expr_call (eval.c:913)
==100691==    by 0x10D99F: eval_expr (eval.c:1824)
==100691==    by 0x10CDB3: eval (eval.c:2100)
==100691==    by 0x11246A: eval_stmt_if (eval.c:1879)
==100691==    by 0x112415: eval_stmt_if (eval.c:1881)
==100691==    by 0x112415: eval_stmt_if (eval.c:1881)
==100691==  Address 0x4bcd5a1 is 1 bytes inside a block of size 6 free'd
==100691==    at 0x483CA3F: free (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==100691==    by 0x112777: gc_mas (gc.c:110)
==100691==    by 0x10BD00: env_gc (eval.c:54)
==100691==    by 0x10CF5A: eval (eval.c:2103)
==100691==    by 0x10D5BB: eval_with_return (eval.c:901)
==100691==    by 0x10D74B: eval_expr_call (eval.c:932)
==100691==    by 0x10D99F: eval_expr (eval.c:1824)
==100691==    by 0x112132: builtin_print (eval.c:182)
==100691==    by 0x112224: builtin_println (eval.c:196)
==100691==    by 0x10D66D: eval_expr_call (eval.c:913)
==100691==    by 0x10D99F: eval_expr (eval.c:1824)
==100691==    by 0x10CDB3: eval (eval.c:2100)
==100691==  Block was alloc'd at
==100691==    at 0x483B7F3: malloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==100691==    by 0x114BAE: strcpy_to_heap (common.c:4)
==100691==    by 0x10E919: eval_expr_value (eval.c:1143)
==100691==    by 0x10E919: eval_expr (eval.c:1832)
==100691==    by 0x112132: builtin_print (eval.c:182)
==100691==    by 0x112224: builtin_println (eval.c:196)
==100691==    by 0x10D66D: eval_expr_call (eval.c:913)
==100691==    by 0x10D99F: eval_expr (eval.c:1824)
==100691==    by 0x10CDB3: eval (eval.c:2100)
==100691==    by 0x11246A: eval_stmt_if (eval.c:1879)
==100691==    by 0x112415: eval_stmt_if (eval.c:1881)
==100691==    by 0x112415: eval_stmt_if (eval.c:1881)
==100691==    by 0x10CF5A: eval (eval.c:2103)
==100691== 
==100691== Invalid read of size 1
==100691==    at 0x4A4C73C: _IO_new_file_xsputn (fileops.c:1219)
==100691==    by 0x4A4C73C: _IO_file_xsputn@@GLIBC_2.2.5 (fileops.c:1197)
==100691==    by 0x4A3412B: __vfprintf_internal (vfprintf-internal.c:1688)
==100691==    by 0x4AEB152: __fprintf_chk (fprintf_chk.c:33)
==100691==    by 0x10C475: fprintf (stdio2.h:100)
==100691==    by 0x10C475: fprint_value (eval.c:170)
==100691==    by 0x112187: builtin_print (eval.c:188)
==100691==    by 0x112224: builtin_println (eval.c:196)
==100691==    by 0x10D66D: eval_expr_call (eval.c:913)
==100691==    by 0x10D99F: eval_expr (eval.c:1824)
==100691==    by 0x10CDB3: eval (eval.c:2100)
==100691==    by 0x11246A: eval_stmt_if (eval.c:1879)
==100691==    by 0x112415: eval_stmt_if (eval.c:1881)
==100691==    by 0x112415: eval_stmt_if (eval.c:1881)
==100691==  Address 0x4bcd5a4 is 4 bytes inside a block of size 6 free'd
==100691==    at 0x483CA3F: free (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==100691==    by 0x112777: gc_mas (gc.c:110)
==100691==    by 0x10BD00: env_gc (eval.c:54)
==100691==    by 0x10CF5A: eval (eval.c:2103)
==100691==    by 0x10D5BB: eval_with_return (eval.c:901)
==100691==    by 0x10D74B: eval_expr_call (eval.c:932)
==100691==    by 0x10D99F: eval_expr (eval.c:1824)
==100691==    by 0x112132: builtin_print (eval.c:182)
==100691==    by 0x112224: builtin_println (eval.c:196)
==100691==    by 0x10D66D: eval_expr_call (eval.c:913)
==100691==    by 0x10D99F: eval_expr (eval.c:1824)
==100691==    by 0x10CDB3: eval (eval.c:2100)
==100691==  Block was alloc'd at
==100691==    at 0x483B7F3: malloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==100691==    by 0x114BAE: strcpy_to_heap (common.c:4)
==100691==    by 0x10E919: eval_expr_value (eval.c:1143)
==100691==    by 0x10E919: eval_expr (eval.c:1832)
==100691==    by 0x112132: builtin_print (eval.c:182)
==100691==    by 0x112224: builtin_println (eval.c:196)
==100691==    by 0x10D66D: eval_expr_call (eval.c:913)
==100691==    by 0x10D99F: eval_expr (eval.c:1824)
==100691==    by 0x10CDB3: eval (eval.c:2100)
==100691==    by 0x11246A: eval_stmt_if (eval.c:1879)
==100691==    by 0x112415: eval_stmt_if (eval.c:1881)
==100691==    by 0x112415: eval_stmt_if (eval.c:1881)
==100691==    by 0x10CF5A: eval (eval.c:2103)
==100691== 
==100691== Invalid read of size 1
==100691==    at 0x48436E0: mempcpy (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==100691==    by 0x4A4C661: _IO_new_file_xsputn (fileops.c:1236)
==100691==    by 0x4A4C661: _IO_file_xsputn@@GLIBC_2.2.5 (fileops.c:1197)
==100691==    by 0x4A3412B: __vfprintf_internal (vfprintf-internal.c:1688)
==100691==    by 0x4AEB152: __fprintf_chk (fprintf_chk.c:33)
==100691==    by 0x10C475: fprintf (stdio2.h:100)
==100691==    by 0x10C475: fprint_value (eval.c:170)
==100691==    by 0x112187: builtin_print (eval.c:188)
==100691==    by 0x112224: builtin_println (eval.c:196)
==100691==    by 0x10D66D: eval_expr_call (eval.c:913)
==100691==    by 0x10D99F: eval_expr (eval.c:1824)
==100691==    by 0x10CDB3: eval (eval.c:2100)
==100691==    by 0x11246A: eval_stmt_if (eval.c:1879)
==100691==    by 0x112415: eval_stmt_if (eval.c:1881)
==100691==  Address 0x4bcd5a0 is 0 bytes inside a block of size 6 free'd
==100691==    at 0x483CA3F: free (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==100691==    by 0x112777: gc_mas (gc.c:110)
==100691==    by 0x10BD00: env_gc (eval.c:54)
==100691==    by 0x10CF5A: eval (eval.c:2103)
==100691==    by 0x10D5BB: eval_with_return (eval.c:901)
==100691==    by 0x10D74B: eval_expr_call (eval.c:932)
==100691==    by 0x10D99F: eval_expr (eval.c:1824)
==100691==    by 0x112132: builtin_print (eval.c:182)
==100691==    by 0x112224: builtin_println (eval.c:196)
==100691==    by 0x10D66D: eval_expr_call (eval.c:913)
==100691==    by 0x10D99F: eval_expr (eval.c:1824)
==100691==    by 0x10CDB3: eval (eval.c:2100)
==100691==  Block was alloc'd at
==100691==    at 0x483B7F3: malloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==100691==    by 0x114BAE: strcpy_to_heap (common.c:4)
==100691==    by 0x10E919: eval_expr_value (eval.c:1143)
==100691==    by 0x10E919: eval_expr (eval.c:1832)
==100691==    by 0x112132: builtin_print (eval.c:182)
==100691==    by 0x112224: builtin_println (eval.c:196)
==100691==    by 0x10D66D: eval_expr_call (eval.c:913)
==100691==    by 0x10D99F: eval_expr (eval.c:1824)
==100691==    by 0x10CDB3: eval (eval.c:2100)
==100691==    by 0x11246A: eval_stmt_if (eval.c:1879)
==100691==    by 0x112415: eval_stmt_if (eval.c:1881)
==100691==    by 0x112415: eval_stmt_if (eval.c:1881)
==100691==    by 0x10CF5A: eval (eval.c:2103)
==100691== 
==100691== Invalid read of size 1
==100691==    at 0x48436EE: mempcpy (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==100691==    by 0x4A4C661: _IO_new_file_xsputn (fileops.c:1236)
==100691==    by 0x4A4C661: _IO_file_xsputn@@GLIBC_2.2.5 (fileops.c:1197)
==100691==    by 0x4A3412B: __vfprintf_internal (vfprintf-internal.c:1688)
==100691==    by 0x4AEB152: __fprintf_chk (fprintf_chk.c:33)
==100691==    by 0x10C475: fprintf (stdio2.h:100)
==100691==    by 0x10C475: fprint_value (eval.c:170)
==100691==    by 0x112187: builtin_print (eval.c:188)
==100691==    by 0x112224: builtin_println (eval.c:196)
==100691==    by 0x10D66D: eval_expr_call (eval.c:913)
==100691==    by 0x10D99F: eval_expr (eval.c:1824)
==100691==    by 0x10CDB3: eval (eval.c:2100)
==100691==    by 0x11246A: eval_stmt_if (eval.c:1879)
==100691==    by 0x112415: eval_stmt_if (eval.c:1881)
==100691==  Address 0x4bcd5a2 is 2 bytes inside a block of size 6 free'd
==100691==    at 0x483CA3F: free (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==100691==    by 0x112777: gc_mas (gc.c:110)
==100691==    by 0x10BD00: env_gc (eval.c:54)
==100691==    by 0x10CF5A: eval (eval.c:2103)
==100691==    by 0x10D5BB: eval_with_return (eval.c:901)
==100691==    by 0x10D74B: eval_expr_call (eval.c:932)
==100691==    by 0x10D99F: eval_expr (eval.c:1824)
==100691==    by 0x112132: builtin_print (eval.c:182)
==100691==    by 0x112224: builtin_println (eval.c:196)
==100691==    by 0x10D66D: eval_expr_call (eval.c:913)
==100691==    by 0x10D99F: eval_expr (eval.c:1824)
==100691==    by 0x10CDB3: eval (eval.c:2100)
==100691==  Block was alloc'd at
==100691==    at 0x483B7F3: malloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==100691==    by 0x114BAE: strcpy_to_heap (common.c:4)
==100691==    by 0x10E919: eval_expr_value (eval.c:1143)
==100691==    by 0x10E919: eval_expr (eval.c:1832)
==100691==    by 0x112132: builtin_print (eval.c:182)
==100691==    by 0x112224: builtin_println (eval.c:196)
==100691==    by 0x10D66D: eval_expr_call (eval.c:913)
==100691==    by 0x10D99F: eval_expr (eval.c:1824)
==100691==    by 0x10CDB3: eval (eval.c:2100)
==100691==    by 0x11246A: eval_stmt_if (eval.c:1879)
==100691==    by 0x112415: eval_stmt_if (eval.c:1881)
==100691==    by 0x112415: eval_stmt_if (eval.c:1881)
==100691==    by 0x10CF5A: eval (eval.c:2103)
==100691== 
==100691== 
==100691== HEAP SUMMARY:
==100691==     in use at exit: 0 bytes in 0 blocks
==100691==   total heap usage: 534 allocs, 534 frees, 97,035 bytes allocated
==100691== 
==100691== All heap blocks were freed -- no leaks are possible
==100691== 
==100691== For lists of detected and suppressed errors, rerun with: -s
==100691== ERROR SUMMARY: 20 errors from 5 contexts (suppressed: 0 from 0)
