==25837== Memcheck, a memory error detector
==25837== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.
==25837== Using Valgrind-3.15.0 and LibVEX; rerun with -h for copyright info
==25837== Command: ./bin/app tests/fun.toki
==25837== 
==25837== Invalid read of size 1
==25837==    at 0x483FED4: strcmp (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==25837==    by 0x10AB07: env_new_var.isra.0 (eval.c:40)
==25837==    by 0x10BE83: eval_expr_call (eval.c:427)
==25837==    by 0x10BE83: eval_expr (eval.c:913)
==25837==    by 0x10CDA0: builtin_print (eval.c:126)
==25837==    by 0x10CDEC: builtin_println (eval.c:133)
==25837==    by 0x10AF4B: eval (eval.c:1065)
==25837==    by 0x10A5D1: main (main.c:84)
==25837==  Address 0x4bb42e0 is 0 bytes inside a block of size 2 free'd
==25837==    at 0x483CA3F: free (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==25837==    by 0x10CEC4: token_free (token.c:5)
==25837==    by 0x10FF22: parser_skip (parser.c:60)
==25837==    by 0x10FF22: parse_expr_fun (parser.c:150)
==25837==    by 0x10FF22: parse_expr_factor (parser.c:197)
==25837==    by 0x10EF3F: parse_expr_call (parser.c:210)
==25837==    by 0x10F075: parse_expr_pow (parser.c:239)
==25837==    by 0x10F115: parse_expr_term (parser.c:260)
==25837==    by 0x10F1F5: parse_expr_arith (parser.c:282)
==25837==    by 0x10F2B5: parse_expr_in (parser.c:303)
==25837==    by 0x10F355: parse_expr_comp (parser.c:337)
==25837==    by 0x10F415: parse_expr_logic (parser.c:358)
==25837==    by 0x10F4D5: parse_expr_inc (parser.c:379)
==25837==    by 0x10F595: parse_expr_assign (parser.c:401)
==25837==  Block was alloc'd at
==25837==    at 0x483B7F3: malloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==25837==    by 0x10EC8E: strcpy_to_heap (common.c:4)
==25837==    by 0x10DC18: lex_id (lexer.c:84)
==25837==    by 0x10DC18: lexer_next (lexer.c:297)
==25837==    by 0x10EE95: parser_advance (parser.c:54)
==25837==    by 0x10FE66: parser_skip (parser.c:61)
==25837==    by 0x10FE66: parse_expr_fun (parser.c:140)
==25837==    by 0x10FE66: parse_expr_factor (parser.c:197)
==25837==    by 0x10EF3F: parse_expr_call (parser.c:210)
==25837==    by 0x10F075: parse_expr_pow (parser.c:239)
==25837==    by 0x10F115: parse_expr_term (parser.c:260)
==25837==    by 0x10F1F5: parse_expr_arith (parser.c:282)
==25837==    by 0x10F2B5: parse_expr_in (parser.c:303)
==25837==    by 0x10F355: parse_expr_comp (parser.c:337)
==25837==    by 0x10F415: parse_expr_logic (parser.c:358)
==25837== 
==25837== Invalid read of size 1
==25837==    at 0x483FED7: strcmp (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==25837==    by 0x10AB07: env_new_var.isra.0 (eval.c:40)
==25837==    by 0x10BE83: eval_expr_call (eval.c:427)
==25837==    by 0x10BE83: eval_expr (eval.c:913)
==25837==    by 0x10CDA0: builtin_print (eval.c:126)
==25837==    by 0x10CDEC: builtin_println (eval.c:133)
==25837==    by 0x10AF4B: eval (eval.c:1065)
==25837==    by 0x10A5D1: main (main.c:84)
==25837==  Address 0x4bb4380 is 0 bytes inside a block of size 2 free'd
==25837==    at 0x483CA3F: free (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==25837==    by 0x10CEC4: token_free (token.c:5)
==25837==    by 0x10FF22: parser_skip (parser.c:60)
==25837==    by 0x10FF22: parse_expr_fun (parser.c:150)
==25837==    by 0x10FF22: parse_expr_factor (parser.c:197)
==25837==    by 0x10EF3F: parse_expr_call (parser.c:210)
==25837==    by 0x10F075: parse_expr_pow (parser.c:239)
==25837==    by 0x10F115: parse_expr_term (parser.c:260)
==25837==    by 0x10F1F5: parse_expr_arith (parser.c:282)
==25837==    by 0x10F2B5: parse_expr_in (parser.c:303)
==25837==    by 0x10F355: parse_expr_comp (parser.c:337)
==25837==    by 0x10F415: parse_expr_logic (parser.c:358)
==25837==    by 0x10F4D5: parse_expr_inc (parser.c:379)
==25837==    by 0x10F595: parse_expr_assign (parser.c:401)
==25837==  Block was alloc'd at
==25837==    at 0x483B7F3: malloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==25837==    by 0x10EC8E: strcpy_to_heap (common.c:4)
==25837==    by 0x10DC18: lex_id (lexer.c:84)
==25837==    by 0x10DC18: lexer_next (lexer.c:297)
==25837==    by 0x10EE95: parser_advance (parser.c:54)
==25837==    by 0x10FEB8: parser_skip (parser.c:61)
==25837==    by 0x10FEB8: parse_expr_fun (parser.c:156)
==25837==    by 0x10FEB8: parse_expr_factor (parser.c:197)
==25837==    by 0x10EF3F: parse_expr_call (parser.c:210)
==25837==    by 0x10F075: parse_expr_pow (parser.c:239)
==25837==    by 0x10F115: parse_expr_term (parser.c:260)
==25837==    by 0x10F1F5: parse_expr_arith (parser.c:282)
==25837==    by 0x10F2B5: parse_expr_in (parser.c:303)
==25837==    by 0x10F355: parse_expr_comp (parser.c:337)
==25837==    by 0x10F415: parse_expr_logic (parser.c:358)
==25837== 
==25837== Invalid read of size 1
==25837==    at 0x483FED4: strcmp (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==25837==    by 0x10A7EA: env_get_var (eval.c:65)
==25837==    by 0x10B35B: eval_expr_id (eval.c:444)
==25837==    by 0x10B35B: eval_expr (eval.c:914)
==25837==    by 0x10BC4B: eval_expr_bin_op_add (eval.c:679)
==25837==    by 0x10BC4B: eval_expr_bin_op (eval.c:860)
==25837==    by 0x10BC4B: eval_expr (eval.c:918)
==25837==    by 0x10AD79: eval_stmt_return (eval.c:1031)
==25837==    by 0x10AD79: eval (eval.c:1070)
==25837==    by 0x10B289: eval_with_return (eval.c:409)
==25837==    by 0x10B289: eval_expr_do (eval.c:455)
==25837==    by 0x10B289: eval_expr (eval.c:915)
==25837==    by 0x10CDA0: builtin_print (eval.c:126)
==25837==    by 0x10CDEC: builtin_println (eval.c:133)
==25837==    by 0x10AF4B: eval (eval.c:1065)
==25837==    by 0x10A5D1: main (main.c:84)
==25837==  Address 0x4bb42e0 is 0 bytes inside a block of size 2 free'd
==25837==    at 0x483CA3F: free (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==25837==    by 0x10CEC4: token_free (token.c:5)
==25837==    by 0x10FF22: parser_skip (parser.c:60)
==25837==    by 0x10FF22: parse_expr_fun (parser.c:150)
==25837==    by 0x10FF22: parse_expr_factor (parser.c:197)
==25837==    by 0x10EF3F: parse_expr_call (parser.c:210)
==25837==    by 0x10F075: parse_expr_pow (parser.c:239)
==25837==    by 0x10F115: parse_expr_term (parser.c:260)
==25837==    by 0x10F1F5: parse_expr_arith (parser.c:282)
==25837==    by 0x10F2B5: parse_expr_in (parser.c:303)
==25837==    by 0x10F355: parse_expr_comp (parser.c:337)
==25837==    by 0x10F415: parse_expr_logic (parser.c:358)
==25837==    by 0x10F4D5: parse_expr_inc (parser.c:379)
==25837==    by 0x10F595: parse_expr_assign (parser.c:401)
==25837==  Block was alloc'd at
==25837==    at 0x483B7F3: malloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==25837==    by 0x10EC8E: strcpy_to_heap (common.c:4)
==25837==    by 0x10DC18: lex_id (lexer.c:84)
==25837==    by 0x10DC18: lexer_next (lexer.c:297)
==25837==    by 0x10EE95: parser_advance (parser.c:54)
==25837==    by 0x10FE66: parser_skip (parser.c:61)
==25837==    by 0x10FE66: parse_expr_fun (parser.c:140)
==25837==    by 0x10FE66: parse_expr_factor (parser.c:197)
==25837==    by 0x10EF3F: parse_expr_call (parser.c:210)
==25837==    by 0x10F075: parse_expr_pow (parser.c:239)
==25837==    by 0x10F115: parse_expr_term (parser.c:260)
==25837==    by 0x10F1F5: parse_expr_arith (parser.c:282)
==25837==    by 0x10F2B5: parse_expr_in (parser.c:303)
==25837==    by 0x10F355: parse_expr_comp (parser.c:337)
==25837==    by 0x10F415: parse_expr_logic (parser.c:358)
==25837== 
==25837== Invalid read of size 1
==25837==    at 0x483FEE8: strcmp (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==25837==    by 0x10A7EA: env_get_var (eval.c:65)
==25837==    by 0x10B35B: eval_expr_id (eval.c:444)
==25837==    by 0x10B35B: eval_expr (eval.c:914)
==25837==    by 0x10BC4B: eval_expr_bin_op_add (eval.c:679)
==25837==    by 0x10BC4B: eval_expr_bin_op (eval.c:860)
==25837==    by 0x10BC4B: eval_expr (eval.c:918)
==25837==    by 0x10AD79: eval_stmt_return (eval.c:1031)
==25837==    by 0x10AD79: eval (eval.c:1070)
==25837==    by 0x10B289: eval_with_return (eval.c:409)
==25837==    by 0x10B289: eval_expr_do (eval.c:455)
==25837==    by 0x10B289: eval_expr (eval.c:915)
==25837==    by 0x10CDA0: builtin_print (eval.c:126)
==25837==    by 0x10CDEC: builtin_println (eval.c:133)
==25837==    by 0x10AF4B: eval (eval.c:1065)
==25837==    by 0x10A5D1: main (main.c:84)
==25837==  Address 0x4bb42e1 is 1 bytes inside a block of size 2 free'd
==25837==    at 0x483CA3F: free (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==25837==    by 0x10CEC4: token_free (token.c:5)
==25837==    by 0x10FF22: parser_skip (parser.c:60)
==25837==    by 0x10FF22: parse_expr_fun (parser.c:150)
==25837==    by 0x10FF22: parse_expr_factor (parser.c:197)
==25837==    by 0x10EF3F: parse_expr_call (parser.c:210)
==25837==    by 0x10F075: parse_expr_pow (parser.c:239)
==25837==    by 0x10F115: parse_expr_term (parser.c:260)
==25837==    by 0x10F1F5: parse_expr_arith (parser.c:282)
==25837==    by 0x10F2B5: parse_expr_in (parser.c:303)
==25837==    by 0x10F355: parse_expr_comp (parser.c:337)
==25837==    by 0x10F415: parse_expr_logic (parser.c:358)
==25837==    by 0x10F4D5: parse_expr_inc (parser.c:379)
==25837==    by 0x10F595: parse_expr_assign (parser.c:401)
==25837==  Block was alloc'd at
==25837==    at 0x483B7F3: malloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==25837==    by 0x10EC8E: strcpy_to_heap (common.c:4)
==25837==    by 0x10DC18: lex_id (lexer.c:84)
==25837==    by 0x10DC18: lexer_next (lexer.c:297)
==25837==    by 0x10EE95: parser_advance (parser.c:54)
==25837==    by 0x10FE66: parser_skip (parser.c:61)
==25837==    by 0x10FE66: parse_expr_fun (parser.c:140)
==25837==    by 0x10FE66: parse_expr_factor (parser.c:197)
==25837==    by 0x10EF3F: parse_expr_call (parser.c:210)
==25837==    by 0x10F075: parse_expr_pow (parser.c:239)
==25837==    by 0x10F115: parse_expr_term (parser.c:260)
==25837==    by 0x10F1F5: parse_expr_arith (parser.c:282)
==25837==    by 0x10F2B5: parse_expr_in (parser.c:303)
==25837==    by 0x10F355: parse_expr_comp (parser.c:337)
==25837==    by 0x10F415: parse_expr_logic (parser.c:358)
==25837== 
==25837== Invalid read of size 1
==25837==    at 0x483FED4: strcmp (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==25837==    by 0x10A7EA: env_get_var (eval.c:65)
==25837==    by 0x10B35B: eval_expr_id (eval.c:444)
==25837==    by 0x10B35B: eval_expr (eval.c:914)
==25837==    by 0x10BC63: eval_expr_bin_op_add (eval.c:680)
==25837==    by 0x10BC63: eval_expr_bin_op (eval.c:860)
==25837==    by 0x10BC63: eval_expr (eval.c:918)
==25837==    by 0x10AD79: eval_stmt_return (eval.c:1031)
==25837==    by 0x10AD79: eval (eval.c:1070)
==25837==    by 0x10B289: eval_with_return (eval.c:409)
==25837==    by 0x10B289: eval_expr_do (eval.c:455)
==25837==    by 0x10B289: eval_expr (eval.c:915)
==25837==    by 0x10CDA0: builtin_print (eval.c:126)
==25837==    by 0x10CDEC: builtin_println (eval.c:133)
==25837==    by 0x10AF4B: eval (eval.c:1065)
==25837==    by 0x10A5D1: main (main.c:84)
==25837==  Address 0x4bb42e0 is 0 bytes inside a block of size 2 free'd
==25837==    at 0x483CA3F: free (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==25837==    by 0x10CEC4: token_free (token.c:5)
==25837==    by 0x10FF22: parser_skip (parser.c:60)
==25837==    by 0x10FF22: parse_expr_fun (parser.c:150)
==25837==    by 0x10FF22: parse_expr_factor (parser.c:197)
==25837==    by 0x10EF3F: parse_expr_call (parser.c:210)
==25837==    by 0x10F075: parse_expr_pow (parser.c:239)
==25837==    by 0x10F115: parse_expr_term (parser.c:260)
==25837==    by 0x10F1F5: parse_expr_arith (parser.c:282)
==25837==    by 0x10F2B5: parse_expr_in (parser.c:303)
==25837==    by 0x10F355: parse_expr_comp (parser.c:337)
==25837==    by 0x10F415: parse_expr_logic (parser.c:358)
==25837==    by 0x10F4D5: parse_expr_inc (parser.c:379)
==25837==    by 0x10F595: parse_expr_assign (parser.c:401)
==25837==  Block was alloc'd at
==25837==    at 0x483B7F3: malloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==25837==    by 0x10EC8E: strcpy_to_heap (common.c:4)
==25837==    by 0x10DC18: lex_id (lexer.c:84)
==25837==    by 0x10DC18: lexer_next (lexer.c:297)
==25837==    by 0x10EE95: parser_advance (parser.c:54)
==25837==    by 0x10FE66: parser_skip (parser.c:61)
==25837==    by 0x10FE66: parse_expr_fun (parser.c:140)
==25837==    by 0x10FE66: parse_expr_factor (parser.c:197)
==25837==    by 0x10EF3F: parse_expr_call (parser.c:210)
==25837==    by 0x10F075: parse_expr_pow (parser.c:239)
==25837==    by 0x10F115: parse_expr_term (parser.c:260)
==25837==    by 0x10F1F5: parse_expr_arith (parser.c:282)
==25837==    by 0x10F2B5: parse_expr_in (parser.c:303)
==25837==    by 0x10F355: parse_expr_comp (parser.c:337)
==25837==    by 0x10F415: parse_expr_logic (parser.c:358)
==25837== 
==25837== Invalid read of size 1
==25837==    at 0x483FEE8: strcmp (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==25837==    by 0x10A7EA: env_get_var (eval.c:65)
==25837==    by 0x10B35B: eval_expr_id (eval.c:444)
==25837==    by 0x10B35B: eval_expr (eval.c:914)
==25837==    by 0x10BC63: eval_expr_bin_op_add (eval.c:680)
==25837==    by 0x10BC63: eval_expr_bin_op (eval.c:860)
==25837==    by 0x10BC63: eval_expr (eval.c:918)
==25837==    by 0x10AD79: eval_stmt_return (eval.c:1031)
==25837==    by 0x10AD79: eval (eval.c:1070)
==25837==    by 0x10B289: eval_with_return (eval.c:409)
==25837==    by 0x10B289: eval_expr_do (eval.c:455)
==25837==    by 0x10B289: eval_expr (eval.c:915)
==25837==    by 0x10CDA0: builtin_print (eval.c:126)
==25837==    by 0x10CDEC: builtin_println (eval.c:133)
==25837==    by 0x10AF4B: eval (eval.c:1065)
==25837==    by 0x10A5D1: main (main.c:84)
==25837==  Address 0x4bb4381 is 1 bytes inside a block of size 2 free'd
==25837==    at 0x483CA3F: free (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==25837==    by 0x10CEC4: token_free (token.c:5)
==25837==    by 0x10FF22: parser_skip (parser.c:60)
==25837==    by 0x10FF22: parse_expr_fun (parser.c:150)
==25837==    by 0x10FF22: parse_expr_factor (parser.c:197)
==25837==    by 0x10EF3F: parse_expr_call (parser.c:210)
==25837==    by 0x10F075: parse_expr_pow (parser.c:239)
==25837==    by 0x10F115: parse_expr_term (parser.c:260)
==25837==    by 0x10F1F5: parse_expr_arith (parser.c:282)
==25837==    by 0x10F2B5: parse_expr_in (parser.c:303)
==25837==    by 0x10F355: parse_expr_comp (parser.c:337)
==25837==    by 0x10F415: parse_expr_logic (parser.c:358)
==25837==    by 0x10F4D5: parse_expr_inc (parser.c:379)
==25837==    by 0x10F595: parse_expr_assign (parser.c:401)
==25837==  Block was alloc'd at
==25837==    at 0x483B7F3: malloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==25837==    by 0x10EC8E: strcpy_to_heap (common.c:4)
==25837==    by 0x10DC18: lex_id (lexer.c:84)
==25837==    by 0x10DC18: lexer_next (lexer.c:297)
==25837==    by 0x10EE95: parser_advance (parser.c:54)
==25837==    by 0x10FEB8: parser_skip (parser.c:61)
==25837==    by 0x10FEB8: parse_expr_fun (parser.c:156)
==25837==    by 0x10FEB8: parse_expr_factor (parser.c:197)
==25837==    by 0x10EF3F: parse_expr_call (parser.c:210)
==25837==    by 0x10F075: parse_expr_pow (parser.c:239)
==25837==    by 0x10F115: parse_expr_term (parser.c:260)
==25837==    by 0x10F1F5: parse_expr_arith (parser.c:282)
==25837==    by 0x10F2B5: parse_expr_in (parser.c:303)
==25837==    by 0x10F355: parse_expr_comp (parser.c:337)
==25837==    by 0x10F415: parse_expr_logic (parser.c:358)
==25837== 
==25837== 
==25837== HEAP SUMMARY:
==25837==     in use at exit: 0 bytes in 0 blocks
==25837==   total heap usage: 69 allocs, 69 frees, 13,392 bytes allocated
==25837== 
==25837== All heap blocks were freed -- no leaks are possible
==25837== 
==25837== For lists of detected and suppressed errors, rerun with: -s
==25837== ERROR SUMMARY: 7 errors from 6 contexts (suppressed: 0 from 0)
